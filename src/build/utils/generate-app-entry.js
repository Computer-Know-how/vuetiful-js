const fs = require('fs');
const path = require('path');
const componentNames = require('./helpers/get-components');

const indexFileContent =
`
/*
	GENERATED BY:
  	generate-app-entry.js
	DO NOT EDIT MANUALLY
*/

/* Import every component in src/components */
${ componentNames.map(componentName => `import ${componentName} from './components/${componentName}/${componentName}.vue'`).join(';\n') };

/* Export components individually */
export { ${componentNames.map(componentName => componentName).join(', ')} };

/* Use every component when the library is installed as a Vue plugin */
function install(Vue) {
${componentNames.map(componentName => `	Vue.component('vuetiful-${componentName.match(/[A-Z][a-z]+/g).join('-').toLowerCase()}', ${componentName})`).join(';\n') };
}

/* Export the library as a plugin */
export default { install: install };
`;

/* Overwrite the index.js file with new contents */
fs.writeFileSync(path.resolve(__dirname, '../../index.js'), indexFileContent);
